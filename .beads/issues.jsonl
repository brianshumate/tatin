{"id":"tatin-1ww","title":"Suppress debconf/dpkg warnings in Packer build","description":"During Packer builds, debconf and apt produce noisy warnings that clutter the output:\n\n**debconf warnings:**\n- Unable to initialize frontend: Dialog/Readline/Teletype\n- Falls back to Noninteractive after multiple frontend failures\n- Caused by missing TTY and Term::ReadLine module\n\n**apt warnings:**\n- 'apt does not have a stable CLI interface' \n\n**Fix:**\n1. Set `DEBIAN_FRONTEND=noninteractive` in Packer provisioner environment\n2. Replace `apt` with `apt-get` in provisioning scripts (stable CLI)\n3. Consider adding `-qq` flag for quieter output\n\nThis is already handled in the Vagrantfile but needs to be applied to Packer build scripts.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-21T12:44:31.1482-05:00","created_by":"Brian Shumate","updated_at":"2026-01-21T12:46:51.31294-05:00","closed_at":"2026-01-21T12:46:51.31294-05:00","close_reason":"Fixed by exporting DEBIAN_FRONTEND and using sudo -E in all Packer provisioning scripts"}
{"id":"tatin-5e2","title":"Test Packer build with mise configuration","description":"Run a full Packer build to verify the mise-based configuration works.\n\n## Test steps\n1. Run packer init packer/\n2. Run packer build packer/\n3. Verify image builds successfully\n4. Start VM with vagrant up\n5. SSH into VM and verify:\n   - mise --version works\n   - python --version shows mise-managed version\n   - go version shows mise-managed version\n   - node --version shows mise-managed version\n   - ruby --version shows mise-managed version\n   - bun --version shows mise-managed version\n   - rustc --version shows mise-managed version\n   - claude and opencode commands work\n   - crush command works\n\n## Common issues to watch for\n- PATH not set correctly\n- mise not activated in non-interactive shells\n- Build dependencies missing for Ruby/Python\n- Permission issues with user-space installation\n\n## Acceptance Criteria\n- Packer build completes without errors\n- All tools accessible and functional in VM\n- AI agent tools work correctly","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T15:25:17.053701-05:00","created_by":"brian","updated_at":"2026-01-21T15:25:17.053701-05:00","dependencies":[{"issue_id":"tatin-5e2","depends_on_id":"tatin-ndn","type":"blocks","created_at":"2026-01-21T15:25:31.405776-05:00","created_by":"brian"},{"issue_id":"tatin-5e2","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.662542-05:00","created_by":"brian"}]}
{"id":"tatin-6oh","title":"Fix typo: 'Tartin' should be 'Tatin' in PROJECT.md","description":"PROJECT.md line 5 says 'Tartin combines Tart...' but should say 'Tatin combines Tart...'. Simple typo fix.","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-21T08:03:28.505886-05:00","created_by":"Brian Shumate","updated_at":"2026-01-21T08:07:01.42387-05:00","closed_at":"2026-01-21T08:07:01.42387-05:00","close_reason":"Fixed typo on line 5: Tartin -\u003e Tatin"}
{"id":"tatin-7s5","title":"Add Packer image build documentation to README","description":"README lacks instructions for building the Tatin base image with Packer. Users need to know: (1) Packer prerequisites. (2) How to run packer init and packer build. (3) That the Vagrantfile expects a pre-built 'tatin' image to exist. (4) Build time expectations.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T08:03:28.783697-05:00","created_by":"Brian Shumate","updated_at":"2026-01-21T08:08:37.765076-05:00","closed_at":"2026-01-21T08:08:37.765076-05:00","close_reason":"Added Packer prerequisite, 'Building the Base Image' section with init/validate/build commands, and updated Quick Start to include image build step","dependencies":[{"issue_id":"tatin-7s5","depends_on_id":"tatin-pg8","type":"blocks","created_at":"2026-01-21T08:04:09.378317-05:00","created_by":"Brian Shumate"}]}
{"id":"tatin-7t6","title":"Update variables.pkr.hcl for mise","description":"Simplify the Packer variables now that mise manages versions.\n\n## Changes\n\n### Remove version variables (mise.toml handles these now)\n```hcl\n# These can be removed or kept as documentation\nvariable \"go_version\" {}    # Now in mise.toml\nvariable \"ruby_version\" {}  # Now in mise.toml\n```\n\n### Option A: Remove entirely\nMise.toml is now the source of truth for versions.\n\n### Option B: Keep but pass to mise\nIf we want Packer to control versions:\n```hcl\nvariable \"mise_python_version\" {\n  default = \"3\"\n}\n```\nThen pass to mise.sh as environment variables.\n\n## Recommendation\nOption A - let mise.toml be the source of truth. Simpler.\n\n## Acceptance Criteria\n- Variables file is simplified\n- No orphaned variables for removed scripts","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T15:24:45.891173-05:00","created_by":"brian","updated_at":"2026-01-21T15:24:45.891173-05:00","dependencies":[{"issue_id":"tatin-7t6","depends_on_id":"tatin-ndn","type":"blocks","created_at":"2026-01-21T15:25:31.572645-05:00","created_by":"brian"},{"issue_id":"tatin-7t6","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.377519-05:00","created_by":"brian"}]}
{"id":"tatin-8ac","title":"Troubleshoot vagrant up / tart VM not starting","description":"vagrant up command is failing and the tart VM for tatin is not starting. Troubleshooting steps:\n1. Check tart installation: tart --version\n2. Check vagrant-tart plugin: vagrant plugin list\n3. Check if base VM image exists: tart list\n4. Review vagrant up output for specific errors\n5. Check Vagrantfile configuration\n6. Verify tart permissions and virtualization support","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T09:44:39.762376-05:00","created_by":"Brian Shumate","updated_at":"2026-01-21T10:00:01.425839-05:00","closed_at":"2026-01-21T10:00:01.425839-05:00","close_reason":"Fixed naming conflict: changed tart.name from 'tatin' to 'tatin-sandbox' to avoid collision with the source image"}
{"id":"tatin-9ov","title":"Update crush.sh to use mise-managed npm","description":"Update the crush.sh script to work with mise-managed Node.js/npm.\n\n## Current state\ncrush.sh installs crush via npm, with a fallback to bun:\n```bash\nnpm install -g @anthropics/claude-crush\n```\n\n## Changes needed\nSince Node.js is now managed by mise, the script needs to ensure mise is activated before running npm:\n\n```bash\n# Activate mise for current session\neval \"$(~/.local/bin/mise activate bash)\"\n\n# Now npm is available\nnpm install -g @anthropics/claude-crush\n```\n\n## Alternative\nUse mise exec:\n```bash\n~/.local/bin/mise exec -- npm install -g @anthropics/claude-crush\n```\n\n## Acceptance Criteria\n- crush installs successfully using mise's npm\n- Script doesn't depend on system npm","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T15:25:11.434657-05:00","created_by":"brian","updated_at":"2026-01-21T15:25:11.434657-05:00","dependencies":[{"issue_id":"tatin-9ov","depends_on_id":"tatin-dyy","type":"blocks","created_at":"2026-01-21T15:25:31.345651-05:00","created_by":"brian"},{"issue_id":"tatin-9ov","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.60283-05:00","created_by":"brian"}]}
{"id":"tatin-bdh","title":"Create global mise.toml configuration","description":"Create a mise.toml configuration file that defines all the languages and tools to install.\n\n## Location\nEither:\n- packer/files/mise.toml (copied to ~/.config/mise/config.toml during provisioning)\n- Or inline in the mise.sh script\n\n## Tools to configure\n```toml\n[tools]\npython = \"3\"\ngo = \"1.23\"\nnode = \"lts\"\nruby = \"3.3\"\nbun = \"latest\"\nrust = \"latest\"\n```\n\n## Notes\n- Use flexible version specs where possible (e.g., \"3\" not \"3.12.1\")\n- Variables in variables.pkr.hcl can override if needed\n\n## Acceptance Criteria\n- mise.toml file exists and is valid\n- All required tools are specified with appropriate versions","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-21T15:24:20.547922-05:00","created_by":"brian","updated_at":"2026-01-21T15:28:17.118849-05:00","dependencies":[{"issue_id":"tatin-bdh","depends_on_id":"tatin-ju7","type":"blocks","created_at":"2026-01-21T15:25:31.148829-05:00","created_by":"brian"},{"issue_id":"tatin-bdh","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.139018-05:00","created_by":"brian"}]}
{"id":"tatin-bqq","title":"Update finalize.sh for mise environment","description":"Update the finalize script to reflect the new mise-based environment.\n\n## Changes needed\n\n### Update installed tools summary\n```bash\necho \"Development tools installed:\"\necho \"  ○ mise (version manager)\"\necho \"  ○ Python, Go, Ruby, Node.js, Bun, Rust (via mise)\"\necho \"  ○ build-essential, git, jq\"\necho \"  ○ tmux, zsh, vim\"\n```\n\n### Ensure mise is in PATH\nThe mise shell integration should already be in .bashrc from mise.sh, but verify.\n\n### Clean up\n- Remove any rbenv-specific cleanup\n- Remove any references to old installation methods\n\n## Acceptance Criteria\n- Summary accurately reflects mise-based tools\n- No references to old installation methods","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T15:24:40.355438-05:00","created_by":"brian","updated_at":"2026-01-21T15:24:40.355438-05:00","dependencies":[{"issue_id":"tatin-bqq","depends_on_id":"tatin-ndn","type":"blocks","created_at":"2026-01-21T15:25:31.519352-05:00","created_by":"brian"},{"issue_id":"tatin-bqq","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.317673-05:00","created_by":"brian"}]}
{"id":"tatin-dyy","title":"Install all languages via mise in single provisioning step","description":"Use mise install to install all languages and tools in a single step during image build.\n\n## Approach\nAfter mise is installed and mise.toml is in place:\n```bash\n~/.local/bin/mise install\n```\n\nThis will install Python, Go, Node.js, Ruby, Bun, and Rust as configured in mise.toml.\n\n## Benefits over current approach\n- Single command installs everything\n- No separate scripts for each language\n- Consistent version management\n- Easy to update versions later\n\n## Acceptance Criteria\n- All tools install successfully via mise\n- Tools are accessible in PATH when shell is activated\n- Versions match mise.toml specification","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T15:24:24.876852-05:00","created_by":"brian","updated_at":"2026-01-21T15:24:24.876852-05:00","dependencies":[{"issue_id":"tatin-dyy","depends_on_id":"tatin-bdh","type":"blocks","created_at":"2026-01-21T15:25:31.21892-05:00","created_by":"brian"},{"issue_id":"tatin-dyy","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.201603-05:00","created_by":"brian"}]}
{"id":"tatin-ju7","title":"Create mise.sh provisioning script","description":"Create a new provisioning script that installs Mise (mise-en-place) for the admin user.\n\n## Requirements\n- Install mise using the official installer: curl https://mise.run | sh\n- Set up shell integration in ~/.bashrc\n- Ensure mise is available for subsequent provisioning steps\n- Install mise in user-space (~/.local/bin)\n\n## Script location\npacker/scripts/mise.sh\n\n## Installation approach\n```bash\ncurl https://mise.run | sh\necho 'eval \"$(~/.local/bin/mise activate bash)\"' \u003e\u003e ~/.bashrc\n```\n\n## Acceptance Criteria\n- Script installs mise successfully\n- mise command is available in PATH\n- Shell integration is configured in .bashrc","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T15:24:15.675098-05:00","created_by":"brian","updated_at":"2026-01-21T15:27:54.054503-05:00","closed_at":"2026-01-21T15:27:54.054503-05:00","close_reason":"Implemented mise.sh provisioning script","dependencies":[{"issue_id":"tatin-ju7","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.071163-05:00","created_by":"brian"}]}
{"id":"tatin-k2v","title":"Add Ruby environment with rbenv to Packer build","description":"Update the Packer build to properly include a Ruby environment using rbenv.\n\n## Requirements\n- Install rbenv and ruby-build plugin\n- Configure rbenv for the vagrant user\n- Install a recent stable Ruby version (e.g., 3.3.x)\n- Ensure rbenv is properly initialized in shell profile\n- Verify Ruby and gem commands work after provisioning\n\n## Context\nThe current Packer build includes development tools but lacks Ruby support, which is needed for certain agent workflows and Ruby-based tooling.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-21T13:11:50.969064-05:00","created_by":"Brian Shumate","updated_at":"2026-01-21T13:16:34.134717-05:00","closed_at":"2026-01-21T13:16:34.134717-05:00","close_reason":"Closed"}
{"id":"tatin-mpq","title":"Update base-system.sh for mise build dependencies","description":"Review and update base-system.sh to ensure all build dependencies are available for mise to compile languages.\n\n## Current Ruby build deps (for rbenv)\n```bash\nlibssl-dev libreadline-dev zlib1g-dev libyaml-dev libffi-dev\n```\n\n## What mise needs\nMise compiles languages from source for some (Ruby, Python with pyenv backend). We need to keep build dependencies.\n\n## Changes\n1. Keep existing build dependencies\n2. Add any additional deps mise might need\n3. Remove any rbenv-specific packages if any\n\n## Reference\n- https://mise.jdx.dev/lang/ruby.html\n- https://mise.jdx.dev/lang/python.html\n\n## Acceptance Criteria\n- Ruby compiles successfully via mise\n- Python installs successfully via mise\n- No missing build dependencies","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T15:25:21.905547-05:00","created_by":"brian","updated_at":"2026-01-21T15:25:21.905547-05:00","dependencies":[{"issue_id":"tatin-mpq","depends_on_id":"tatin-ju7","type":"blocks","created_at":"2026-01-21T15:25:34.517408-05:00","created_by":"brian"},{"issue_id":"tatin-mpq","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.720886-05:00","created_by":"brian"}]}
{"id":"tatin-ndn","title":"Update tatin.pkr.hcl for mise-based provisioning","description":"Refactor the Packer configuration to use mise instead of individual language scripts.\n\n## Changes needed\n\n### Add mise provisioner (before language-specific scripts)\n```hcl\n# Mise (runs as admin user)\nprovisioner \"shell\" {\n  script          = \"${path.root}/scripts/mise.sh\"\n  execute_command = \"chmod +x {{ .Path }}; {{ .Vars }} sudo -E -u ${var.ssh_username} bash '{{ .Path }}'\"\n  environment_vars = [\n    \"DEBIAN_FRONTEND=noninteractive\",\n    \"HOME=/home/${var.ssh_username}\"\n  ]\n}\n```\n\n### Remove or consolidate individual provisioners\n- Remove: python.sh provisioner\n- Remove: golang.sh provisioner\n- Remove: nodejs.sh provisioner\n- Remove: ruby.sh provisioner\n- Remove: bun.sh provisioner\n\n### Keep as-is\n- base-system.sh (still need apt packages for build tools)\n- claude-code.sh (proprietary installer)\n- opencode.sh (proprietary installer)\n- crush.sh (uses npm from mise's node)\n- finalize.sh (update to reflect mise)\n\n## Acceptance Criteria\n- Packer build succeeds with new configuration\n- Mise installs all languages\n- AI tools still install correctly","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-21T15:24:35.312345-05:00","created_by":"brian","updated_at":"2026-01-21T15:24:35.312345-05:00","dependencies":[{"issue_id":"tatin-ndn","depends_on_id":"tatin-dyy","type":"blocks","created_at":"2026-01-21T15:25:31.282368-05:00","created_by":"brian"},{"issue_id":"tatin-ndn","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.261608-05:00","created_by":"brian"}]}
{"id":"tatin-nyd","title":"Tatin: LLM Agent Sandbox Implementation","description":"Complete implementation of Tatin - an isolated sandbox for LLM agent workflows using Tart virtualization with Vagrant. Provides a full Debian 13 development environment with sudo access, development tools, and AI agent tools.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-20T19:28:39.509459-05:00","created_by":"Brian Shumate","updated_at":"2026-01-20T19:34:02.525842-05:00","closed_at":"2026-01-20T19:34:02.525842-05:00","close_reason":"Closed"}
{"id":"tatin-nyd.1","title":"Create Vagrantfile with Tart provider configuration","description":"Create the main Vagrantfile using vagrant-tart plugin to provision a Debian 13 VM. Configure VM settings, networking, and synced folders.","acceptance_criteria":"- Vagrantfile exists and is valid Ruby syntax\n- Uses vagrant-tart provider\n- Configures Debian 13 base image\n- Sets appropriate VM resources (CPU, memory)\n- vagrant validate passes","notes":"Starting implementation","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T19:28:50.212736-05:00","created_by":"Brian Shumate","updated_at":"2026-01-20T19:31:56.25921-05:00","closed_at":"2026-01-20T19:31:56.25921-05:00","close_reason":"Closed","dependencies":[{"issue_id":"tatin-nyd.1","depends_on_id":"tatin-nyd","type":"parent-child","created_at":"2026-01-20T19:28:50.214182-05:00","created_by":"Brian Shumate"}]}
{"id":"tatin-nyd.2","title":"Provision development tools","description":"Install core development tools in the VM: build-essential, git, jq, bun, python3, golang, tmux, zsh","acceptance_criteria":"- All tools installed and accessible in PATH\n- build-essential provides gcc, make, etc.\n- git configured and working\n- bun runtime installed\n- python3 with pip\n- go toolchain installed\n- tmux and zsh available","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T19:28:58.833467-05:00","created_by":"Brian Shumate","updated_at":"2026-01-20T19:31:56.261478-05:00","closed_at":"2026-01-20T19:31:56.261478-05:00","close_reason":"Closed","dependencies":[{"issue_id":"tatin-nyd.2","depends_on_id":"tatin-nyd","type":"parent-child","created_at":"2026-01-20T19:28:58.834612-05:00","created_by":"Brian Shumate"},{"issue_id":"tatin-nyd.2","depends_on_id":"tatin-nyd.1","type":"blocks","created_at":"2026-01-20T19:28:58.835701-05:00","created_by":"Brian Shumate"}]}
{"id":"tatin-nyd.3","title":"Install AI agent tools","description":"Install AI agent tools: Claude Code, Crush, and OpenCode. Configure them to be ready for use.","acceptance_criteria":"- Claude Code installed and in PATH\n- Crush installed and in PATH\n- OpenCode installed and in PATH\n- All tools can be invoked successfully","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T19:29:05.459807-05:00","created_by":"Brian Shumate","updated_at":"2026-01-20T19:31:56.267895-05:00","closed_at":"2026-01-20T19:31:56.267895-05:00","close_reason":"Closed","dependencies":[{"issue_id":"tatin-nyd.3","depends_on_id":"tatin-nyd","type":"parent-child","created_at":"2026-01-20T19:29:05.461178-05:00","created_by":"Brian Shumate"},{"issue_id":"tatin-nyd.3","depends_on_id":"tatin-nyd.2","type":"blocks","created_at":"2026-01-20T19:29:05.462388-05:00","created_by":"Brian Shumate"}]}
{"id":"tatin-nyd.4","title":"Create tatin.sh lifecycle management script","description":"Create a Bash script to manage VM lifecycle with nice UX: spinner during operations, quiet output, log redirection. Commands: up, down, delete, status","acceptance_criteria":"- Script at scripts/tatin.sh\n- tatin up starts VM with spinner\n- tatin down stops VM\n- tatin delete destroys VM\n- tatin status shows VM state\n- Output is clean, logs go to file\n- Script is executable","notes":"Starting implementation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T19:29:21.203082-05:00","created_by":"Brian Shumate","updated_at":"2026-01-20T19:32:49.947655-05:00","closed_at":"2026-01-20T19:32:49.947655-05:00","close_reason":"Closed","dependencies":[{"issue_id":"tatin-nyd.4","depends_on_id":"tatin-nyd","type":"parent-child","created_at":"2026-01-20T19:29:21.204222-05:00","created_by":"Brian Shumate"},{"issue_id":"tatin-nyd.4","depends_on_id":"tatin-nyd.1","type":"blocks","created_at":"2026-01-20T19:29:21.205371-05:00","created_by":"Brian Shumate"}]}
{"id":"tatin-nyd.5","title":"Document project in README.md","description":"Write comprehensive README.md with installation instructions, usage guide, and architecture overview.","acceptance_criteria":"- Clear project description\n- Prerequisites listed\n- Installation steps documented\n- Usage examples provided\n- Architecture explained","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T19:29:27.860024-05:00","created_by":"Brian Shumate","updated_at":"2026-01-20T19:33:29.126776-05:00","closed_at":"2026-01-20T19:33:29.126776-05:00","close_reason":"Closed","dependencies":[{"issue_id":"tatin-nyd.5","depends_on_id":"tatin-nyd","type":"parent-child","created_at":"2026-01-20T19:29:27.861455-05:00","created_by":"Brian Shumate"},{"issue_id":"tatin-nyd.5","depends_on_id":"tatin-nyd.1","type":"blocks","created_at":"2026-01-20T19:29:27.862583-05:00","created_by":"Brian Shumate"},{"issue_id":"tatin-nyd.5","depends_on_id":"tatin-nyd.4","type":"blocks","created_at":"2026-01-20T19:29:27.863578-05:00","created_by":"Brian Shumate"}]}
{"id":"tatin-p6y","title":"Design Packer template for Tatin Tart image","description":"Create a Packer template that builds a Tart VM image equivalent to the Vagrant-provisioned Tatin sandbox. This enables:\n\n1. Faster VM startup (pre-built image vs runtime provisioning)\n2. Reproducible builds with version pinning\n3. Image distribution via container registry (ghcr.io)\n4. CI/CD integration for automated image builds\n\nThe Packer template should replicate all provisioning from the Vagrantfile:\n- Base: ghcr.io/cirruslabs/debian:latest\n- Specs: 4 CPU, 8GB RAM, 20GB disk\n- Tools: build-essential, git, jq, tmux, zsh, vim, htop, tree\n- Runtimes: Python 3, Go 1.23.5, Bun, Node.js LTS\n- Agent tools: Claude Code, OpenCode, Crush","design":"## Packer Template Design\n\n### File Structure\n```\npacker/\n├── tatin.pkr.hcl          # Main Packer template\n├── variables.pkr.hcl      # Variable definitions\n└── scripts/\n    ├── base-system.sh     # Core packages\n    ├── python.sh          # Python 3 setup\n    ├── golang.sh          # Go 1.23.5 setup\n    ├── bun.sh             # Bun runtime\n    ├── nodejs.sh          # Node.js LTS\n    ├── claude-code.sh     # Claude Code CLI\n    ├── opencode.sh        # OpenCode CLI\n    ├── crush.sh           # Crush agent\n    └── finalize.sh        # Final cleanup\n```\n\n### Packer Template (tatin.pkr.hcl)\n```hcl\npacker {\n  required_plugins {\n    tart = {\n      version = \"\u003e= 1.12.0\"\n      source  = \"github.com/cirruslabs/tart\"\n    }\n  }\n}\n\nsource \"tart-cli\" \"tatin\" {\n  from_oci       = \"ghcr.io/cirruslabs/debian:latest\"\n  vm_name        = \"tatin\"\n  cpu_count      = 4\n  memory_gb      = 8\n  disk_size_gb   = 20\n  ssh_username   = \"admin\"\n  ssh_password   = \"admin\"\n  ssh_timeout    = \"120s\"\n}\n\nbuild {\n  sources = [\"source.tart-cli.tatin\"]\n\n  # Base system\n  provisioner \"shell\" {\n    script = \"scripts/base-system.sh\"\n    environment_vars = [\"DEBIAN_FRONTEND=noninteractive\"]\n  }\n\n  # Language runtimes (sequential - some depend on others)\n  provisioner \"shell\" {\n    script = \"scripts/python.sh\"\n    environment_vars = [\"DEBIAN_FRONTEND=noninteractive\"]\n  }\n\n  provisioner \"shell\" {\n    script = \"scripts/golang.sh\"\n  }\n\n  provisioner \"shell\" {\n    script = \"scripts/nodejs.sh\"\n    environment_vars = [\"DEBIAN_FRONTEND=noninteractive\"]\n  }\n\n  provisioner \"shell\" {\n    script = \"scripts/bun.sh\"\n    execute_command = \"chmod +x {{ .Path }}; {{ .Vars }} sudo -E -u admin bash '{{ .Path }}'\"\n    environment_vars = [\"DEBIAN_FRONTEND=noninteractive\"]\n  }\n\n  # Agent tools (unprivileged)\n  provisioner \"shell\" {\n    script = \"scripts/claude-code.sh\"\n    execute_command = \"chmod +x {{ .Path }}; {{ .Vars }} sudo -E -u admin bash '{{ .Path }}'\"\n    environment_vars = [\"DEBIAN_FRONTEND=noninteractive\"]\n  }\n\n  provisioner \"shell\" {\n    script = \"scripts/opencode.sh\"\n    execute_command = \"chmod +x {{ .Path }}; {{ .Vars }} sudo -E -u admin bash '{{ .Path }}'\"\n    environment_vars = [\"DEBIAN_FRONTEND=noninteractive\"]\n  }\n\n  provisioner \"shell\" {\n    script = \"scripts/crush.sh\"\n    execute_command = \"chmod +x {{ .Path }}; {{ .Vars }} sudo -E -u admin bash '{{ .Path }}'\"\n    environment_vars = [\"DEBIAN_FRONTEND=noninteractive\"]\n  }\n\n  # Cleanup and finalize\n  provisioner \"shell\" {\n    script = \"scripts/finalize.sh\"\n  }\n\n  post-processor \"manifest\" {\n    output = \"manifest.json\"\n  }\n}\n```\n\n### Key Design Decisions\n\n1. **Tart Plugin**: Use cirruslabs/tart plugin v1.12+ for native Tart integration\n2. **OCI Base Image**: Pull from ghcr.io/cirruslabs/debian:latest (same as Vagrantfile)\n3. **Modular Scripts**: Each provisioner as separate .sh file for maintainability\n4. **Privilege Handling**: Root for system packages, admin user for user-space tools\n5. **SSH Auth**: Use existing admin/admin credentials from base image\n\n### Variables (variables.pkr.hcl)\n```hcl\nvariable \"go_version\" {\n  type    = string\n  default = \"1.23.5\"\n}\n\nvariable \"vm_name\" {\n  type    = string\n  default = \"tatin\"\n}\n\nvariable \"cpu_count\" {\n  type    = number\n  default = 4\n}\n\nvariable \"memory_gb\" {\n  type    = number\n  default = 8\n}\n\nvariable \"disk_size_gb\" {\n  type    = number\n  default = 20\n}\n```\n\n### Build Commands\n```bash\n# Initialize plugins\npacker init packer/\n\n# Validate template\npacker validate packer/\n\n# Build image\npacker build packer/\n\n# Build with custom variables\npacker build -var 'vm_name=tatin-dev' -var 'cpu_count=8' packer/\n```\n\n### Registry Publishing (optional)\n```bash\n# Push to ghcr.io\ntart push tatin ghcr.io/$ORG/tatin:latest\n\n# Use in Vagrant\ntart.image = \"ghcr.io/$ORG/tatin:latest\"\n```","acceptance_criteria":"- [ ] Packer template builds successfully with `packer build`\n- [ ] Resulting Tart image boots and SSH works with admin/admin\n- [ ] All base system tools present: build-essential, git, jq, tmux, zsh, vim, htop, tree\n- [ ] Python 3 installed and accessible\n- [ ] Go 1.23.5 installed with proper PATH setup\n- [ ] Bun runtime installed for admin user\n- [ ] Node.js LTS installed\n- [ ] Claude Code CLI installed and functional\n- [ ] OpenCode CLI installed and functional\n- [ ] Crush agent installed and functional\n- [ ] Image can be used as vagrant-tart base box\n- [ ] Build is reproducible (same inputs produce equivalent output)\n- [ ] Template validates with `packer validate`","notes":"## Implementation Complete\n\nCreated packer/ directory with:\n- tatin.pkr.hcl - Main Packer template using cirruslabs/tart plugin\n- variables.pkr.hcl - Configurable variables for customization\n- scripts/*.sh - 9 modular provisioning scripts\n\n### Validation Note\nFull validation requires macOS host with:\n- Packer installed (`brew install packer`)\n- Tart installed (`brew install cirruslabs/cli/tart`)\n- Run `packer init packer/` then `packer validate packer/`\n\n### Build Command\n```bash\ncd /path/to/tatin\npacker init packer/\npacker build packer/\n```\n\n### Files Created\n```\npacker/\n├── tatin.pkr.hcl\n├── variables.pkr.hcl\n└── scripts/\n    ├── base-system.sh\n    ├── python.sh\n    ├── golang.sh\n    ├── nodejs.sh\n    ├── bun.sh\n    ├── claude-code.sh\n    ├── opencode.sh\n    ├── crush.sh\n    └── finalize.sh\n```","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-21T01:37:51.382581319Z","created_by":"admin","updated_at":"2026-01-21T01:43:20.055399829Z","closed_at":"2026-01-21T01:43:20.055399829Z","close_reason":"Implemented Packer template with all provisioning scripts matching Vagrantfile configuration"}
{"id":"tatin-pg8","title":"Commit packer/ directory to version control","description":"The packer/ directory with tatin.pkr.hcl, variables.pkr.hcl, and all provisioning scripts is currently untracked in git. These files are essential for building the base image and should be version controlled.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T08:03:28.915998-05:00","created_by":"Brian Shumate","updated_at":"2026-01-21T08:07:29.495193-05:00","closed_at":"2026-01-21T08:07:29.495193-05:00","close_reason":"Added packer/ directory to git staging"}
{"id":"tatin-u0l","title":"Run Packer build in headless mode (disable GUI)","description":"The Packer build currently opens a GUI window during the build process. Configure the tart-cli builder to run headless for cleaner CI/CD builds and less desktop clutter during local builds.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T12:48:04.495915-05:00","created_by":"Brian Shumate","updated_at":"2026-01-21T12:48:57.749273-05:00","closed_at":"2026-01-21T12:48:57.749273-05:00","close_reason":"Added headless = true to tart-cli source in packer/tatin.pkr.hcl"}
{"id":"tatin-u80","title":"README.md outdated after Packer transition","description":"README.md has multiple outdated sections after the transition to Packer pre-built images: (1) Says disk is 50GB but Vagrantfile now specifies 20GB. (2) Describes provisioning stages in Vagrantfile but provisioning is now done by Packer. (3) Says root folder synced to /vagrant but this is now disabled. (4) Architecture section missing packer/ directory. (5) Synced Folders documentation is incorrect.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T08:03:28.648685-05:00","created_by":"Brian Shumate","updated_at":"2026-01-21T08:08:12.344952-05:00","closed_at":"2026-01-21T08:08:12.344952-05:00","close_reason":"Updated README.md: fixed disk size (50-\u003e20GB), updated architecture section with packer/, clarified provisioning is done by Packer, fixed synced folders documentation"}
{"id":"tatin-uao","title":"Update Vagrantfile shell integration for mise","description":"Review Vagrantfile to ensure mise works correctly in the Vagrant environment.\n\n## Current state\nThe Vagrantfile uses a pre-built Tart image created by Packer. It doesn't do any provisioning itself.\n\n## What to check\n1. Synced folders work with mise-managed tools\n2. SSH sessions properly load mise environment\n3. If inline provisioning is added later, it should use mise\n\n## Changes likely not needed\nSince provisioning happens in Packer (image build time), not Vagrant (runtime), the Vagrantfile probably doesn't need changes. Mise is already configured in .bashrc.\n\n## If provisioning is added\nExample of using mise in Vagrantfile provisioner:\n```ruby\nconfig.vm.provision \"shell\", inline: \u003c\u003c-SHELL\n  sudo -u admin bash -c 'source ~/.bashrc \u0026\u0026 mise run some-task'\nSHELL\n```\n\n## Acceptance Criteria\n- Vagrant up succeeds with mise-based image\n- mise is accessible in SSH sessions\n- No PATH or tool resolution issues","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T15:25:00.089561-05:00","created_by":"brian","updated_at":"2026-01-21T15:25:00.089561-05:00","dependencies":[{"issue_id":"tatin-uao","depends_on_id":"tatin-5e2","type":"blocks","created_at":"2026-01-21T15:25:31.62837-05:00","created_by":"brian"},{"issue_id":"tatin-uao","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.488383-05:00","created_by":"brian"}]}
{"id":"tatin-v7z","title":"Add checksum verification for agent tool installations","description":"Agent tool installations in packer/scripts/ use curl-pipe-bash patterns without checksum verification: claude-code.sh, opencode.sh, crush.sh. While acceptable for local sandbox development, adding checksum verification would improve security posture.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-21T08:03:29.05224-05:00","created_by":"Brian Shumate","updated_at":"2026-01-21T08:09:20.26844-05:00","closed_at":"2026-01-21T08:09:20.26844-05:00","close_reason":"Added verification to agent tool installers: claude-code.sh and opencode.sh now download scripts to temp files first, validate non-empty, and log SHA256 hashes for audit. crush.sh documents npm registry integrity verification."}
{"id":"tatin-w7x","title":"Remove obsolete language installation scripts","description":"Delete the individual language installation scripts that are now replaced by mise.\n\n## Scripts to remove\n- packer/scripts/python.sh (replaced by mise)\n- packer/scripts/golang.sh (replaced by mise)\n- packer/scripts/nodejs.sh (replaced by mise)\n- packer/scripts/ruby.sh (replaced by mise)\n- packer/scripts/bun.sh (replaced by mise)\n\n## Scripts to keep\n- packer/scripts/base-system.sh (apt packages still needed)\n- packer/scripts/mise.sh (new - installs mise and languages)\n- packer/scripts/claude-code.sh (proprietary)\n- packer/scripts/opencode.sh (proprietary)\n- packer/scripts/crush.sh (npm install)\n- packer/scripts/finalize.sh (cleanup)\n\n## Notes\nDo this after mise is working and tested, as a cleanup step.\n\n## Acceptance Criteria\n- Obsolete scripts are removed\n- No dangling references in tatin.pkr.hcl\n- Git history preserved (commit before removing)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-21T15:24:52.979015-05:00","created_by":"brian","updated_at":"2026-01-21T15:24:52.979015-05:00","dependencies":[{"issue_id":"tatin-w7x","depends_on_id":"tatin-5e2","type":"blocks","created_at":"2026-01-21T15:25:31.462867-05:00","created_by":"brian"},{"issue_id":"tatin-w7x","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.436227-05:00","created_by":"brian"}]}
{"id":"tatin-ze3","title":"Add Rust to Tatin via mise","description":"With mise, we can easily add Rust to the development environment.\n\n## Current state\nRust is not currently installed in the Tatin image.\n\n## With mise\nSimply add to mise.toml:\n```toml\n[tools]\nrust = \"latest\"\n```\n\n## Benefits\n- Many AI/developer tools are written in Rust\n- Enables building Rust projects in sandbox\n- No additional complexity (mise already manages other tools)\n\n## Acceptance Criteria\n- Rust is installed via mise\n- rustc and cargo are available in PATH\n- Can compile a simple Rust program","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-21T15:25:04.349995-05:00","created_by":"brian","updated_at":"2026-01-21T15:25:04.349995-05:00","dependencies":[{"issue_id":"tatin-ze3","depends_on_id":"tatin-bdh","type":"blocks","created_at":"2026-01-21T15:25:34.442675-05:00","created_by":"brian"},{"issue_id":"tatin-ze3","depends_on_id":"tatin-zj2","type":"relates-to","created_at":"2026-01-21T15:25:53.545506-05:00","created_by":"brian"}]}
{"id":"tatin-zj2","title":"Epic: Migrate to Mise for language/tool version management","description":"Replace individual language/tool installation scripts with Mise (mise-en-place) for unified version management. Mise can manage Python, Go, Node.js, Ruby, Bun, and Rust from a single tool, eliminating the need for rbenv, NodeSource, manual tarball downloads, etc.\n\n## Benefits\n- Single tool for all language versions (replaces asdf, nvm, pyenv, rbenv, etc.)\n- Declarative configuration via mise.toml\n- Simplified PATH management\n- Easy version switching\n- Smaller image (no need for rbenv, ruby-build, etc.)\n\n## Documentation\n- https://mise.jdx.dev/\n- https://mise.jdx.dev/getting-started.html\n\n## Scope\n1. Create mise.sh provisioning script to install Mise\n2. Create global mise.toml configuration file\n3. Migrate Python installation from apt to mise\n4. Migrate Go installation from tarball to mise\n5. Migrate Node.js installation from NodeSource to mise\n6. Migrate Ruby installation from rbenv to mise\n7. Migrate Bun installation from official installer to mise\n8. Add Rust via mise (new capability)\n9. Update Packer configuration (tatin.pkr.hcl)\n10. Update Vagrantfile shell integration if needed\n11. Update finalize.sh for mise\n12. Remove obsolete scripts and variables","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-21T15:24:08.854804-05:00","created_by":"brian","updated_at":"2026-01-21T15:24:08.854804-05:00","dependencies":[{"issue_id":"tatin-zj2","depends_on_id":"tatin-ju7","type":"relates-to","created_at":"2026-01-21T15:25:53.070333-05:00","created_by":"brian"},{"issue_id":"tatin-zj2","depends_on_id":"tatin-bdh","type":"relates-to","created_at":"2026-01-21T15:25:53.138411-05:00","created_by":"brian"},{"issue_id":"tatin-zj2","depends_on_id":"tatin-dyy","type":"relates-to","created_at":"2026-01-21T15:25:53.201045-05:00","created_by":"brian"},{"issue_id":"tatin-zj2","depends_on_id":"tatin-ndn","type":"relates-to","created_at":"2026-01-21T15:25:53.261103-05:00","created_by":"brian"},{"issue_id":"tatin-zj2","depends_on_id":"tatin-bqq","type":"relates-to","created_at":"2026-01-21T15:25:53.317142-05:00","created_by":"brian"},{"issue_id":"tatin-zj2","depends_on_id":"tatin-7t6","type":"relates-to","created_at":"2026-01-21T15:25:53.376977-05:00","created_by":"brian"},{"issue_id":"tatin-zj2","depends_on_id":"tatin-w7x","type":"relates-to","created_at":"2026-01-21T15:25:53.435712-05:00","created_by":"brian"},{"issue_id":"tatin-zj2","depends_on_id":"tatin-uao","type":"relates-to","created_at":"2026-01-21T15:25:53.487872-05:00","created_by":"brian"},{"issue_id":"tatin-zj2","depends_on_id":"tatin-ze3","type":"relates-to","created_at":"2026-01-21T15:25:53.544964-05:00","created_by":"brian"},{"issue_id":"tatin-zj2","depends_on_id":"tatin-9ov","type":"relates-to","created_at":"2026-01-21T15:25:53.602243-05:00","created_by":"brian"},{"issue_id":"tatin-zj2","depends_on_id":"tatin-5e2","type":"relates-to","created_at":"2026-01-21T15:25:53.662014-05:00","created_by":"brian"},{"issue_id":"tatin-zj2","depends_on_id":"tatin-mpq","type":"relates-to","created_at":"2026-01-21T15:25:53.720378-05:00","created_by":"brian"}]}
